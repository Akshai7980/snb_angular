<div>
  <div class="actionsConatiner">
    <div class="searchCntnrLeft">
      <app-search
        (searchParams)="advancedSearchApply($event)"
        [showAdvanceSearch]="true"
        (childEvent)="triggerSearchFilter($event)"
      >
      </app-search>
    </div>

    <div>
      <app-refresh (onRefresh)="refreshPayments()"></app-refresh>
    </div>
  </div>

  <div *ngIf="!noRecordFlag && paymentListDataSource">
    <table mat-table [dataSource]="paymentListDataSource" class="casaTable">
      <ng-container matColumnDef="refNo">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('referenceNo')"
          translate
        >
          LBL_REF_NO
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn !== 'referenceNo'
            "
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn === 'referenceNo'
            "
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'desc'
              "
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'asc'
              "
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          <div *ngIf="element.referenceNo">{{ element.referenceNo }}</div>
          <div *ngIf="!element.referenceNo">--</div>
        </td>
      </ng-container>

      <ng-container matColumnDef="uploadType">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('type')"
          translate
        >
          LBL_TYPE
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn !== 'type'
            "
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn === 'type'
            "
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'desc'
              "
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'asc'
              "
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          <div *ngIf="element.type">{{ element.type }}</div>
          <div *ngIf="!element.type">--</div>
        </td>
      </ng-container>

      <ng-container matColumnDef="format">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('format')"
          translate
        >
          LBL_FORMAT
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn !== 'format'
            "
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn === 'format'
            "
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'desc'
              "
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'asc'
              "
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          <div *ngIf="element.format">{{ element.format }}</div>
          <div *ngIf="!element.format">--</div>
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('status')"
          translate
        >
          LBL_STATUS
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn !== 'status'
            "
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn === 'status'
            "
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'desc'
              "
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'asc'
              "
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          <div *ngIf="element.status">{{ element.status }}</div>
          <div *ngIf="!element.status">--</div>
        </td>
      </ng-container>
      <ng-container matColumnDef="totalAmount">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('totalAmt')"
          translate
        >
          LBL_TOTAL_AMOUNT
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn !== 'totalAmt'
            "
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn === 'totalAmt'
            "
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'desc'
              "
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'asc'
              "
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          <div *ngIf="element.totalAmt && element.ccy">
            {{ element.totalAmt | currencyFormat: element.ccy }}
            {{ element.ccy }}
          </div>
          <div *ngIf="!(element.totalAmt && element.ccy)">--</div>
        </td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('makerDate')"
          translate
        >
          LBL_DATE
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn !== 'makerDate'
            "
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            *ngIf="
              responseHeader.sortColumn !== undefined &&
              responseHeader.sortColumn === 'makerDate'
            "
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'desc'
              "
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="
                responseHeader.sortOrder !== undefined &&
                responseHeader.sortOrder === 'asc'
              "
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          <div *ngIf="element.makerDate">
            {{ element.makerDate | dateFormat }}
          </div>
          <div *ngIf="!element.makerDate">--</div>
        </td>
      </ng-container>
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef translate>LBL_ACTION</th>
        <td mat-cell *matCellDef="let element">
          <div
            class="acceptIcon"
            (click)="approveStopPayment($event, element)"
          ></div>
          <div
            class="rejectIcon"
            (click)="rejectStopPayment($event, element)"
          ></div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayColumns"
        (click)="showStopPaymentDetails(row, '/mytask/stopPaymentDetails')"
      ></tr>
    </table>
  </div>
  <div *ngIf="noRecordFlag">
    <app-no-record-found
      [noRecordFoundInfo]="noRecordFoundInfoObj"
    ></app-no-record-found>
  </div>
  <app-pagination
    #paginator
    [dataSourceLength]="totalPaymentListDataSource"
    [currentRecord]="'StopPaymentList'"
    [totalRecords]="totalPaymentRecords"
    (onPaginationChange)="paginationChangeClick($event)"
    *ngIf="!noRecordFlag"
    [flagForRefreshPage]="refreshClickedFlag"
  >
  </app-pagination>
</div>

<app-ajax-loader [hidden]="isLoadingComplete"></app-ajax-loader>
