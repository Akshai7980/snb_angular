<div class="main">
  <div class="searchContainer">
    <app-search (childEvent)="triggerSearchFilter($event)"></app-search>
    <app-refresh
      *ngIf="!noRecordFlag"
      (onRefresh)="refreshSummary()"
    ></app-refresh>
  </div>
  <div id="bulkInprogressDefaultCntr">
    <table mat-table [dataSource]="dataSourceToPass" class="casaTable"  *ngIf="!noRecordFlag">
      <ng-container matColumnDef="linkAccount">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('linkAccount')"
          translate
        >
          LBL_LINK_ACCOUNT
          <span
            class="sortIcons"
            *ngIf="
              currentColumn !== undefined && currentColumn !== 'linkAccount'
            "
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn === 'linkAccount'"
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'desc'"
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'asc'"
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.linkAccount ? element.linkAccount : "--" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="currency">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('currency')"
          translate
        >
          LBL_CURRENCY
          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn !== 'currency'"
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn === 'currency'"
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'desc'"
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'asc'"
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.currency ? element.currency : "--" }}
        </td>
      </ng-container>
      <ng-container matColumnDef="reason">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('reason')"
          translate
        >
          LBL_REASON

          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn !== 'reason'"
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn === 'reason'"
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'desc'"
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'asc'"
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.reason ? element.reason : "--" }}
        </td>
      </ng-container>
      <ng-container matColumnDef="referenceNumber">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('refNo')"
          translate
        >
          LBL_REF_NUMBER

          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn !== 'refNo'"
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn === 'refNo'"
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'desc'"
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'asc'"
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.refNo ? element.refNo : "--" }}
        </td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('valueDate')"
          translate
        >
          LBL_DATE

          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn !== 'valueDate'"
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn === 'valueDate'"
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'desc'"
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'asc'"
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.valueDate ? (element.valueDate | dateFormat) : "--" }}
        </td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th
          mat-header-cell
          *matHeaderCellDef
          (click)="sortColumn('status')"
          translate
        >
          LBL_STATUS

          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn !== 'status'"
          >
            <img src="assets/images/sortDown.svg" class="img-style" />
            <img src="assets/images/sortDown.svg" class="sortUp" />
          </span>
          <span
            class="sortIcons"
            *ngIf="currentColumn && currentColumn === 'status'"
          >
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'status'"
              class="img-style"
            />
            <img
              src="assets/images/sortDown.svg"
              *ngIf="sortDirection && sortDirection === 'status'"
              class="sortUpAscending"
            />
          </span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.statusDesc ? element.statusDesc : "--" }}
        </td>
      </ng-container>
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef translate>LBL_ACTION</th>
        <td mat-cell *matCellDef="let element">
          <div
            class="acceptIcon"
            (click)="onApproveClick($event, element)"
          ></div>
          <div
            class="rejectIcon"
            (click)="onRejectClick($event, element)"
          ></div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        (click)="goToDetailsScreen(row)"
      ></tr>
    </table>
    <div *ngIf="noRecordFlag">
      <app-no-record-found
        [noRecordFoundInfo]="noRecordFoundInfoObj"
      ></app-no-record-found>
    </div>
  </div>
  <app-pagination
    #paginator
    *ngIf="!noRecordFlag"
    [dataSourceLength]="dataSourceLength"
    [currentRecord]="'transactionId'"
    [totalRecords]="totalRecords"
    (onPaginationChange)="paginationChangeClick($event)" [flagForRefreshPage]="refreshClickedFlag"
  ></app-pagination>
</div>
<app-ajax-loader [hidden]="isLoadingCompelete"></app-ajax-loader>
